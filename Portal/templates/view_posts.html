{% extends "layout.html" %}
{% block content %}
<br>
<script src="{{url_for('static', filename='js/jquery-3.1.0.min.js')}}"></script>
<script>
   document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.modal');
    var instances = M.Modal.init(elems, options);
  });
</script>
<div class="row">
    {% for post in posts %}
    <div class="col s12 m6">
      <div class="card blue-grey darken-2">
        <div class="card-content white-text">
            <span class="card-title center-align white-text"><b>{{post['cause']}}</b></span>

            Created by: <i>{{post['created_by_name']}} </i> <span>&#124;</span> <i>Created on: {{post['date_created']}}</i>
            <hr>
            {% if post['description']=="" %}
            <p>Description not provided.</p>
            {% else %}
              <p>Description: {{post['description']}}</p>
            {% endif %}
            <p>Total Amount required: <span class="WebRupee">&#x20B9;</span> <b>{{post['amount']}}</b></p>
            <p>Amount Collected so far: <span class="WebRupee">&#x20B9;</span> {{ post['contributed'] }}</p>
            <p>Date needed by: {{post['end_date']}}</p>
        </div>
        <div class="card-action">
          <a class="waves-effect waves-light btn amber black-text modal-trigger" href="#demo-modal">Contribute</a>
        </div>
      </div>
    </div>
    {% endfor %}
    <!-- Modal Structure -->
        <div id="demo-modal" class="modal" >
            <form method="POST" action="{{ url_for('view_posts') }}">
            <div class="modal-content" style="opacity: 0.8;">
                <h5><b>Payment</b></h5>
                <p>
                Let us know how much you want to contribute!
                </p>
                <span>This is your coin balance (to be done): </span>
            </div>
                <div class="form-group">
                <h6><b style="padding:25px; opacity: 0.8;">Enter Amount</b></h6>
                    {% if make_payment_form.amount.errors %}
                        {{ make_payment_form.amount(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in make_payment_form.amount.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                    <span style="padding:20px; padding-right:50px;">{{ make_payment_form.amount(class="form-control form-control-lg") }}</span>
                    {% endif %}
                </div>
            </form>

            <div class="modal-footer" style="padding-bottom:40px; padding-right:20px;">
<!--                <a href="#!" class="modal-action modal-close waves-effect waves-green btn green lighten-1">-->
<!--                    Make Payment-->
<!--                </a>-->

                <div class="form-group">
                <a> <b> {{ make_payment_form.submit(class="modal-action modal-close waves-effect waves-green btn green lighten-1") }} </b> </a>
                </div>

            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            $('.modal').modal();
        }
        )
    </script>

{% endblock content %}
